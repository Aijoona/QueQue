<!DOCTYPE html>
<html>
	<head>
		<title>QueQue</title>
		<script type="text/javascript" src="QueQue.js"></script>			
	</head>
	<body>
	</body>
	<script type="text/javascript">
		// Basic queue
		QueQue()
			.add(function(proxy) {
				return proxy.memo + ' world';
			})
			.add(function(proxy) {
				console.log(proxy.memo + '!');
			})
			.start('Hello'); // Hello world!
			
		// Async queue
		QueQue()
			.add(function(proxy) {
				function rec() {
					var value = Math.random();
					if(value > 0.99) {
						return proxy.ready(value);
					}
					setTimeout(rec, 200);
				}
				
				rec();
			}, { async: true})
			.add(function(proxy) {
				console.log('Value: ' + proxy.memo);
			})
			.start();
		
		// Events
		QueQue()
			.onComplete(function() {
				console.log('Complete');
			})
			.add(function(proxy) {
				setTimeout(proxy.ready, proxy.memo);
			}, { async: true})
			.start(Math.random() * 10000);
		
	</script>	
</html>